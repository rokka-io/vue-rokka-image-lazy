/*!
 * vue-rokka-image-lazy v0.0.1
 * (c) 
 * Released under the ISC License.
 */
"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var vueRokkaImage=require("vue-rokka-image"),lozad=_interopDefault(require("lozad")),styleInject=_interopDefault(require("../node_modules/style-inject/dist/style-inject.es.js")),__vue_normalize__=_interopDefault(require("../node_modules/rollup-plugin-vue/runtime/normalize.js"));function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}var ImageCache=function(){function e(t){var a=t.max;_classCallCheck(this,e),this.options={max:a||100},this._caches=[]}return _createClass(e,[{key:"has",value:function(e){return this._caches.indexOf(e)>-1}},{key:"add",value:function(e){this.has(e)||(this._caches.push(e),this._caches.length>this.options.max&&this.free())}},{key:"free",value:function(){this._caches.shift()}}]),e}(),script={name:"RokkaImageLazy",components:{RokkaImageImg:vueRokkaImage.RokkaImageImg},props:Object.assign({},vueRokkaImage.RokkaImageImg.props,{srcAttribute:{type:String,default:"data-src"},srcsetAttribute:{type:String,default:"data-srcset"},postfix:{type:[Object,Array],default:function(){return["1x","2x"]}},options:{type:[Object,Array],default:function(){return[{dpr:"1"},{dpr:"2"}]}},loading:{type:String,default:null}}),created:function(){window._imageCache||(window._imageCache=new ImageCache({max:200}))},computed:{srcAdditionalComputed:function(){return!this.loading||this.isCached?"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=":(window._imageCache.add(this.rokkaRenderUrl),this.loading)},isCached:function(){return window._imageCache.has(this.rokkaRenderUrl)},rokkaRenderUrl:function(){return vueRokkaImage.buildRokkaUrl({org:this.org,hash:this.hash,stack:this.stack,format:this.format,filename:this.filename,options:Array.isArray(this.options)?this.options[0]:this.options,variables:Array.isArray(this.variables)?this.variables[0]:this.variables})}},mounted:function(){window._lozadObserver||(window._lozadObserver=lozad(".rokka--attr-data-src",{rootMargin:"200px"})),window._lozadObserver.observe()}},css="";styleInject(css);var __vue_script__=script,__vue_render__=function(){var e=this,t=e.$createElement;return(e._self._c||t)("rokka-image",{key:e.hash,attrs:{org:e.org,hash:e.hash,filename:e.filename,stack:e.stack,format:e.format,alt:e.alt,"srcset-attribute":"data-srcset","src-attribute":"data-src","src-additional-attribute":"src","src-additional":e.srcAdditionalComputed,postfix:e.postfix,options:e.options}})},__vue_staticRenderFns__=[],__vue_inject_styles__=void 0,__vue_scope_id__="data-v-d1a94f48",__vue_module_identifier__=void 0,__vue_is_functional_template__=!1,RokkaImageImgLazy=__vue_normalize__({render:__vue_render__,staticRenderFns:__vue_staticRenderFns__},__vue_inject_styles__,__vue_script__,__vue_scope_id__,__vue_is_functional_template__,__vue_module_identifier__,!1,void 0,void 0,void 0),index={install:function(e,t){e.component("rokka-image-img-lazy",RokkaImageImgLazy)}};exports.RokkaImageImgLazy=RokkaImageImgLazy,exports.default=index;
//# sourceMappingURL=index.min.js.map
