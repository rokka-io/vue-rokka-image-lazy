/*!
 * vue-rokka-image-lazy v0.0.1
 * (c) 
 * Released under the ISC License.
 */
var RokkaImageLazy=function(t,e){"use strict";function a(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const r="undefined"!=typeof document&&document.documentMode,n={rootMargin:"0px",threshold:0,load(t){if("picture"===t.nodeName.toLowerCase()){const e=document.createElement("img");r&&t.getAttribute("data-iesrc")&&(e.src=t.getAttribute("data-iesrc")),t.getAttribute("data-alt")&&(e.alt=t.getAttribute("data-alt")),t.append(e)}if("video"===t.nodeName.toLowerCase()&&!t.getAttribute("data-src")&&t.children){const e=t.children;let a;for(let t=0;t<=e.length-1;t++)(a=e[t].getAttribute("data-src"))&&(e[t].src=a);t.load()}if(t.getAttribute("data-src")&&(t.src=t.getAttribute("data-src")),t.getAttribute("data-srcset")&&t.setAttribute("srcset",t.getAttribute("data-srcset")),t.getAttribute("data-background-image"))t.style.backgroundImage=`url('${t.getAttribute("data-background-image").split(",").join("'),url('")}')`;else if(t.getAttribute("data-background-image-set")){const e=t.getAttribute("data-background-image-set").split(",");let a=e[0].substr(0,e[0].indexOf(" "))||e[0];a=-1===a.indexOf("url(")?`url(${a})`:a,1===e.length?t.style.backgroundImage=a:t.setAttribute("style",(t.getAttribute("style")||"")+`background-image: ${a}; background-image: -webkit-image-set(${e}); background-image: image-set(${e})`)}t.getAttribute("data-toggle-class")&&t.classList.toggle(t.getAttribute("data-toggle-class"))},loaded(){}};function i(t){t.setAttribute("data-loaded",!0)}const o=t=>"true"===t.getAttribute("data-loaded"),s=(t,e)=>(a,r)=>{a.forEach(a=>{(a.intersectionRatio>0||a.isIntersecting)&&(r.unobserve(a.target),o(a.target)||(t(a.target),i(a.target),e(a.target)))})},d=(t,e=document)=>t instanceof Element?[t]:t instanceof NodeList?t:e.querySelectorAll(t);var c=function(){function t(e){var a=e.max;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options={max:a||100},this._caches=[]}var e,r,n;return e=t,(r=[{key:"has",value:function(t){return this._caches.indexOf(t)>-1}},{key:"add",value:function(t){this.has(t)||(this._caches.push(t),this._caches.length>this.options.max&&this.free())}},{key:"free",value:function(){this._caches.shift()}}])&&a(e.prototype,r),n&&a(e,n),t}(),u={name:"RokkaImageImgLazy",components:{RokkaImageImg:e.RokkaImageImg},props:Object.assign({},e.RokkaImageImg.props,{srcAttribute:{type:String,default:"data-src"},srcsetAttribute:{type:String,default:"data-srcset"},postfix:{type:[Object,Array],default:function(){return["1x","2x"]}},options:{type:[Object,Array],default:function(){return[{dpr:"1"},{dpr:"2"}]}},loading:{type:String,default:null}}),created:function(){window._imageCache||(window._imageCache=new c({max:200}))},computed:{srcAdditionalComputed:function(){return!this.loading||this.isCached?"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=":(window._imageCache.add(this.rokkaRenderUrl),this.loading)},isCached:function(){return window._imageCache.has(this.rokkaRenderUrl)},rokkaRenderUrl:function(){return e.buildRokkaUrl({org:this.org,hash:this.hash,stack:this.stack,format:this.format,filename:this.filename,options:Array.isArray(this.options)?this.options[0]:this.options,variables:Array.isArray(this.variables)?this.variables[0]:this.variables})}},mounted:function(){window._lozadObserver||(window._lozadObserver=function(t=".lozad",e={}){const{root:a,rootMargin:r,threshold:c,load:u,loaded:l}=Object.assign({},n,e);let g;return"undefined"!=typeof window&&window.IntersectionObserver&&(g=new IntersectionObserver(s(u,l),{root:a,rootMargin:r,threshold:c})),{observe(){const e=d(t,a);for(let t=0;t<e.length;t++)o(e[t])||(g?g.observe(e[t]):(u(e[t]),i(e[t]),l(e[t])))},triggerLoad(t){o(t)||(u(t),i(t),l(t))},observer:g}}(".rokka--attr-data-src",{rootMargin:"200px"})),window._lozadObserver.observe()}};!function(t,e){void 0===e&&(e={});var a=e.insertAt;if(t&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===a&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}}("");"undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());var l=function(t,e,a,r,n,i,o,s,d,c){"boolean"!=typeof o&&(d=s,s=o,o=!1);const u="function"==typeof a?a.options:a;let l;if(t&&t.render&&(u.render=t.render,u.staticRenderFns=t.staticRenderFns,u._compiled=!0,n&&(u.functional=!0)),r&&(u._scopeId=r),i?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,d(t)),t&&t._registeredComponents&&t._registeredComponents.add(i)},u._ssrRegister=l):e&&(l=o?function(t){e.call(this,c(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,s(t))}),l)if(u.functional){const t=u.render;u.render=function(e,a){return l.call(a),t(e,a)}}else{const t=u.beforeCreate;u.beforeCreate=t?[].concat(t,l):[l]}return a}({render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("rokka-image-img",{key:t.hash,attrs:{org:t.org,hash:t.hash,filename:t.filename,stack:t.stack,format:t.format,alt:t.alt,"srcset-attribute":"data-srcset","src-attribute":"data-src","src-additional-attribute":"src","src-additional":t.srcAdditionalComputed,postfix:t.postfix,options:t.options}})},staticRenderFns:[]},void 0,u,"data-v-38051279",!1,void 0,!1,void 0,void 0,void 0),g={install:function(t,e){t.component("rokka-image-img-lazy",l)}};return t.RokkaImageImgLazy=l,t.default=g,t}({},vueRokkaImage);
//# sourceMappingURL=index.iife.min.js.map
