{"version":3,"file":"index.iife.min.js","sources":["../node_modules/vue-rokka-image/dist/index.umd.js","../node_modules/lozad/dist/lozad.es.js","../node_modules/style-inject/dist/style-inject.es.js","../node_modules/vue-runtime-helpers/dist/index.mjs","../src/Img.vue","../src/index.js"],"sourcesContent":["/*!\n * vue-rokka-image v0.0.10\n * (c) \n * Released under the ISC License.\n */\n(function (factory) {\n  typeof define === 'function' && define.amd ? define(factory) :\n  factory();\n}((function () { 'use strict';\n\n  function _typeof(obj) {\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      _typeof = function (obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  var sanitizedFilename = function sanitizedFilename(fileName) {\n    var newFileName = fileName; // remove old file endings\n\n    newFileName = newFileName.replace(/\\.[^/.]{2,4}$/, ''); // according to the rokka team only point and slash are not allowed\n\n    newFileName = newFileName.replace(/[.\\\\/]/g, '-');\n    return newFileName;\n  };\n  var generalProps = {\n    alt: {\n      type: String,\n      \"default\": null\n    },\n    title: {\n      type: String,\n      \"default\": null\n    },\n    org: {\n      type: String,\n      \"default\": ''\n    },\n    stack: {\n      type: String,\n      \"default\": 'dynamic'\n    },\n    hash: {\n      type: String,\n      \"default\": ''\n    },\n    format: {\n      type: String,\n      \"default\": 'jpg'\n    },\n    filename: {\n      type: String,\n      \"default\": 'image'\n    },\n    srcAttribute: {\n      type: String,\n      \"default\": 'src'\n    },\n    srcAdditionalAttribute: {\n      type: String,\n      \"default\": null\n    },\n    srcsetAttribute: {\n      type: String,\n      \"default\": 'srcset'\n    },\n    operations: {\n      type: Array,\n      \"default\": function _default() {\n        return [];\n      }\n    },\n    options: {\n      type: Object,\n      \"default\": function _default() {\n        return {};\n      }\n    },\n    variables: {\n      type: Object,\n      \"default\": function _default() {\n        return {};\n      }\n    }\n  }; // from an object to the rokka notation\n  // input\n  //       resize: {\n  //         width: 300,\n  //       },\n  //       crop: {\n  //         height: 200\n  //       }\n  // output\n  //       resize-width-300--crop-height-200\n\n  var flattenObject = function flattenObject(obj) {\n    var toReturn = [];\n    Object.keys(obj).forEach(function (key) {\n      var val = obj[key]; // for objects we should do a recursion\n\n      if (_typeof(val) === 'object') {\n        var flatObject = flattenObject(val);\n\n        for (var x in flatObject) {\n          if (!Object.prototype.hasOwnProperty.call(flatObject, x)) continue; // are we itteration over a array or object\n\n          if (Array.isArray(flatObject)) {\n            toReturn.push(\"\".concat(key, \"-\").concat(flatObject[x]));\n          } else {\n            toReturn.push(\"\".concat(key, \"-\").concat(x, \"-\").concat(flatObject[x]));\n          }\n        }\n      } else {\n        toReturn.push(\"\".concat(key, \"-\").concat(val));\n      }\n    });\n    return toReturn;\n  };\n  var rokkaUrl = function rokkaUrl(props) {\n    var org = props.org,\n        stack = props.stack,\n        variables = props.variables,\n        options = props.options,\n        filename = props.filename,\n        format = props.format,\n        hash = props.hash; // let operationsStr = null\n    // if (operations && operations.length) {\n    //   operationsStr = operations\n    //     .reduce(operation => flattenObject(operation), [])\n    //     .join('--')\n    // }\n\n    var variablesStr = flattenObject({\n      v: variables\n    }).join('--');\n    var optionsStr = flattenObject({\n      options: options\n    }).join('--');\n    var url = [\"\".concat(org, \".rokka.io/\").concat(stack), // operationsStr,\n    variablesStr, optionsStr, hash, \"\".concat(sanitizedFilename(filename), \".\").concat(format)].join('/').replace(/\\/{2,}/g, '/');\n    return 'https://' + url;\n  }; // https://stackoverflow.com/questions/27936772/how-to-deep-merge-instead-of-shallow-merge\n\n  /**\n   * Simple object check.\n   * @param item\n   * @returns {boolean}\n   */\n\n  var isObject = function isObject(item) {\n    return item && _typeof(item) === 'object' && !Array.isArray(item);\n  };\n  /**\n   * Deep merge two objects.\n   * @param target\n   * @param ...sources\n   */\n\n  var mergeDeep = function mergeDeep(target) {\n    for (var _len = arguments.length, sources = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      sources[_key - 1] = arguments[_key];\n    }\n\n    if (!sources.length) return target;\n    var source = sources.shift();\n\n    if (isObject(target) && isObject(source)) {\n      for (var key in source) {\n        if (isObject(source[key])) {\n          if (!target[key]) Object.assign(target, _defineProperty({}, key, {}));\n          mergeDeep(target[key], source[key]);\n        } else {\n          Object.assign(target, _defineProperty({}, key, source[key]));\n        }\n      }\n    }\n\n    return mergeDeep.apply(void 0, [target].concat(sources));\n  }; // https://stackoverflow.com/questions/40712399/deep-merging-nested-arrays\n\n  var mergeArraysDeep = function mergeArraysDeep(arr1, arr2) {\n    var unique = arr1.concat(arr2).reduce(function (accumulator, item) {\n      if (accumulator[item.name]) {\n        accumulator[item.name] = mergeDeep(accumulator[item.name], item);\n      } else {\n        accumulator[item.name] = item;\n      }\n\n      return accumulator;\n    }, {});\n    return Object.keys(unique).map(function (key) {\n      return unique[key];\n    });\n  };\n  var srcset = function srcset(item) {\n    var currentPostfix = item.postfix;\n    var currentOperations = item.operations;\n    var currentOptions = item.options;\n    var currentVariables = item.variables;\n    var parrentPostfix = item.$parent && item.$parent.$props && item.$parent.$props.postfix;\n    var parrentOperations = item.$parent && item.$parent.$props && item.$parent.$props.operations;\n    var parrentOptions = item.$parent && item.$parent.$props && item.$parent.$props.options;\n    var parrentVariables = item.$parent && item.$parent.$props && item.$parent.$props.variables;\n    var maxItems = Math.max(Array.isArray(currentPostfix) ? currentPostfix.length : 0, Array.isArray(currentOperations) ? currentOperations.length : 0, Array.isArray(currentOptions) ? currentOptions.length : 0, Array.isArray(currentVariables) ? currentVariables.length : 0);\n\n    if (item.$parent.$options._componentTag === 'rokka-picture') {\n      maxItems = Math.max(maxItems, Array.isArray(parrentPostfix) ? parrentPostfix.length : 0, Array.isArray(parrentOperations) ? parrentOperations.length : 0, Array.isArray(parrentOptions) ? parrentOptions.length : 0, Array.isArray(parrentVariables) ? parrentVariables.length : 0);\n    }\n\n    var srcset = [];\n\n    for (var i = 0; i < maxItems; i++) {\n      // get the current props\n      // depending if passed a obj or an array\n      var postfix = Array.isArray(currentPostfix) ? currentPostfix[i] : currentPostfix;\n      var operations = Array.isArray(currentOperations) && Array.isArray(currentOperations[0]) ? currentOperations[i] : currentOperations;\n      var options = Array.isArray(currentOptions) ? currentOptions[i] : currentOptions;\n      var variables = Array.isArray(currentVariables) ? currentVariables[i] : currentVariables;\n\n      if (item.$parent.$options._componentTag === 'rokka-picture') {\n        // get the parent props\n        // depending if passed a obj or an array\n        var pOperations = Array.isArray(parrentOperations) && Array.isArray(parrentOperations[0]) ? parrentOperations[i] : parrentOperations;\n        var pOptions = Array.isArray(parrentOptions) ? parrentOptions[i] : parrentOptions;\n        var pVariables = Array.isArray(parrentVariables) ? parrentVariables[i] : parrentVariables;\n        operations = mergeArraysDeep(pOperations, operations);\n        variables = mergeDeep(pVariables, variables);\n        options = mergeDeep(pOptions, options);\n      }\n\n      if (options instanceof Array && options.length === 0) {\n        options = {};\n      }\n\n      var url = rokkaUrl(Object.assign({}, item.$parent.$props, {}, item.$options.propsData, {\n        operations: operations,\n        variables: variables,\n        options: options\n      }));\n      url = encodeURI(url) + (postfix ? ' ' + postfix : '');\n      srcset.push(url);\n    }\n\n    return srcset.join(', ');\n  };\n\n  //\n  var script = {\n    props: Object.assign({}, generalProps, {\n      postfix: {\n        type: [Object, Array],\n        \"default\": function _default() {\n          return [];\n        }\n      },\n      options: {\n        type: [Object, Array],\n        \"default\": function _default() {\n          return [];\n        }\n      },\n      srcAdditional: {\n        type: String,\n        \"default\": null\n      }\n    }),\n    computed: {\n      // returns srcAdditional if set, otherwise the link to the rokka URL\n      // Is useful, when you want to set \"src\" to a loading image, which then later gets replaced\n      // by a lazy loader and data-src(set)\n      srcAdditionalComputed: function srcAdditionalComputed() {\n        return this.srcAdditionalAttribute ? this.srcAdditional ? this.srcAdditional : this.rokkaSrc : null;\n      },\n      rokkaSrcset: function rokkaSrcset() {\n        return srcset(this);\n      },\n      rokkaSrc: function rokkaSrc() {\n        var currentOperations = this.operations;\n        var currentOptions = this.options;\n        var currentVariables = this.variables;\n        var parrentOperations = this.$parent && this.$parent.$props && this.$parent.$props.operations;\n        var parrentOptions = this.$parent && this.$parent.$props && this.$parent.$props.options;\n        var parrentVariables = this.$parent && this.$parent.$props && this.$parent.$props.variables; // get the current props\n        // depending if passed a obj or an array\n\n        var operations = Array.isArray(currentOperations) && Array.isArray(currentOperations[0]) ? currentOperations[0] || {} : currentOperations;\n        var options = Array.isArray(currentOptions) ? currentOptions[0] || {} : currentOptions;\n        var variables = Array.isArray(currentVariables) ? currentVariables[0] || {} : currentVariables;\n        var currentProps = this.$props;\n\n        if (this.$parent.$options._componentTag === 'rokka-picture') {\n          // get the parent props\n          // depending if passed a obj or an array\n          var pOperations = Array.isArray(parrentOperations) && Array.isArray(parrentOperations[0]) ? parrentOperations[0] : parrentOperations;\n          var pOptions = Array.isArray(parrentOptions) ? parrentOptions[0] : parrentOptions;\n          var pVariables = Array.isArray(parrentVariables) ? parrentVariables[0] : parrentVariables;\n          operations = mergeArraysDeep(pOperations, operations);\n          variables = mergeDeep(pVariables, variables);\n          options = mergeDeep(pOptions, options); //we have the default props already from the parent in this case, so just use the added ones\n\n          currentProps = this.$options.propsData;\n        }\n\n        var url = rokkaUrl(Object.assign({}, this.$parent.$props, {}, currentProps, {\n          operations: operations,\n          variables: variables,\n          options: options\n        }));\n        return url;\n      }\n    }\n  };\n\n  function normalizeComponent(template, style, script, scopeId, isFunctionalTemplate, moduleIdentifier /* server only */, shadowMode, createInjector, createInjectorSSR, createInjectorShadow) {\r\n      if (typeof shadowMode !== 'boolean') {\r\n          createInjectorSSR = createInjector;\r\n          createInjector = shadowMode;\r\n          shadowMode = false;\r\n      }\r\n      // Vue.extend constructor export interop.\r\n      const options = typeof script === 'function' ? script.options : script;\r\n      // render functions\r\n      if (template && template.render) {\r\n          options.render = template.render;\r\n          options.staticRenderFns = template.staticRenderFns;\r\n          options._compiled = true;\r\n          // functional template\r\n          if (isFunctionalTemplate) {\r\n              options.functional = true;\r\n          }\r\n      }\r\n      // scopedId\r\n      if (scopeId) {\r\n          options._scopeId = scopeId;\r\n      }\r\n      let hook;\r\n      if (moduleIdentifier) {\r\n          // server build\r\n          hook = function (context) {\r\n              // 2.3 injection\r\n              context =\r\n                  context || // cached call\r\n                      (this.$vnode && this.$vnode.ssrContext) || // stateful\r\n                      (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext); // functional\r\n              // 2.2 with runInNewContext: true\r\n              if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\r\n                  context = __VUE_SSR_CONTEXT__;\r\n              }\r\n              // inject component styles\r\n              if (style) {\r\n                  style.call(this, createInjectorSSR(context));\r\n              }\r\n              // register component module identifier for async chunk inference\r\n              if (context && context._registeredComponents) {\r\n                  context._registeredComponents.add(moduleIdentifier);\r\n              }\r\n          };\r\n          // used by ssr in case component is cached and beforeCreate\r\n          // never gets called\r\n          options._ssrRegister = hook;\r\n      }\r\n      else if (style) {\r\n          hook = shadowMode\r\n              ? function (context) {\r\n                  style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot));\r\n              }\r\n              : function (context) {\r\n                  style.call(this, createInjector(context));\r\n              };\r\n      }\r\n      if (hook) {\r\n          if (options.functional) {\r\n              // register for functional component in vue file\r\n              const originalRender = options.render;\r\n              options.render = function renderWithStyleInjection(h, context) {\r\n                  hook.call(context);\r\n                  return originalRender(h, context);\r\n              };\r\n          }\r\n          else {\r\n              // inject component registration as beforeCreate hook\r\n              const existing = options.beforeCreate;\r\n              options.beforeCreate = existing ? [].concat(existing, hook) : [hook];\r\n          }\r\n      }\r\n      return script;\r\n  }\n\n  const isOldIE = typeof navigator !== 'undefined' &&\r\n      /msie [6-9]\\\\b/.test(navigator.userAgent.toLowerCase());\n\n  /* script */\n  var __vue_script__ = script;\n  /* template */\n\n  var __vue_render__ = function __vue_render__() {\n    var _vm = this;\n\n    var _h = _vm.$createElement;\n\n    var _c = _vm._self._c || _h;\n\n    return _c('img', _vm._b({\n      \"class\": 'rokka--attr-' + _vm.srcAttribute,\n      attrs: {\n        \"alt\": _vm.alt,\n        \"title\": _vm.title\n      }\n    }, \"img\", _vm._d({}, [_vm.srcAttribute, _vm.rokkaSrc, _vm.srcsetAttribute, _vm.rokkaSrcset, _vm.srcAdditionalAttribute, _vm.srcAdditionalComputed])));\n  };\n\n  var __vue_staticRenderFns__ = [];\n  /* style */\n\n  var __vue_inject_styles__ = undefined;\n  /* scoped */\n\n  var __vue_scope_id__ = undefined;\n  /* module identifier */\n\n  var __vue_module_identifier__ = undefined;\n  /* functional template */\n\n  var __vue_is_functional_template__ = false;\n  /* style inject */\n\n  /* style inject SSR */\n\n  /* style inject shadow dom */\n\n  var RokkaImg = normalizeComponent({\n    render: __vue_render__,\n    staticRenderFns: __vue_staticRenderFns__\n  }, __vue_inject_styles__, __vue_script__, __vue_scope_id__, __vue_is_functional_template__, __vue_module_identifier__, false, undefined, undefined, undefined);\n\n  //\n  var script$1 = {\n    props: Object.assign({}, generalProps)\n  };\n\n  /* script */\n  var __vue_script__$1 = script$1;\n  /* template */\n\n  var __vue_render__$1 = function __vue_render__() {\n    var _vm = this;\n\n    var _h = _vm.$createElement;\n\n    var _c = _vm._self._c || _h;\n\n    return _c('div', {\n      staticClass: \"rokka-picture\"\n    }, [_c('picture', [_vm._t(\"default\")], 2)]);\n  };\n\n  var __vue_staticRenderFns__$1 = [];\n  /* style */\n\n  var __vue_inject_styles__$1 = undefined;\n  /* scoped */\n\n  var __vue_scope_id__$1 = undefined;\n  /* module identifier */\n\n  var __vue_module_identifier__$1 = undefined;\n  /* functional template */\n\n  var __vue_is_functional_template__$1 = false;\n  /* style inject */\n\n  /* style inject SSR */\n\n  /* style inject shadow dom */\n\n  var RokkaPicture = normalizeComponent({\n    render: __vue_render__$1,\n    staticRenderFns: __vue_staticRenderFns__$1\n  }, __vue_inject_styles__$1, __vue_script__$1, __vue_scope_id__$1, __vue_is_functional_template__$1, __vue_module_identifier__$1, false, undefined, undefined, undefined);\n\n  //\n  var script$2 = {\n    props: Object.assign({}, generalProps, {\n      media: {\n        type: String,\n        \"default\": ''\n      },\n      postfix: {\n        type: [Object, Array],\n        \"default\": function _default() {\n          return [];\n        }\n      },\n      options: {\n        type: [Object, Array],\n        \"default\": function _default() {\n          return [];\n        }\n      },\n      variables: {\n        type: [Object, Array],\n        \"default\": function _default() {\n          return [];\n        }\n      }\n    }),\n    computed: {\n      srcset: function srcset$1() {\n        return srcset(this);\n      }\n    }\n  };\n\n  /* script */\n  var __vue_script__$2 = script$2;\n  /* template */\n\n  var __vue_render__$2 = function __vue_render__() {\n    var _vm = this;\n\n    var _h = _vm.$createElement;\n\n    var _c = _vm._self._c || _h;\n\n    return _c('source', {\n      attrs: {\n        \"media\": _vm.media,\n        \"srcset\": _vm.srcset\n      }\n    });\n  };\n\n  var __vue_staticRenderFns__$2 = [];\n  /* style */\n\n  var __vue_inject_styles__$2 = undefined;\n  /* scoped */\n\n  var __vue_scope_id__$2 = undefined;\n  /* module identifier */\n\n  var __vue_module_identifier__$2 = undefined;\n  /* functional template */\n\n  var __vue_is_functional_template__$2 = false;\n  /* style inject */\n\n  /* style inject SSR */\n\n  /* style inject shadow dom */\n\n  var RokkaSource = normalizeComponent({\n    render: __vue_render__$2,\n    staticRenderFns: __vue_staticRenderFns__$2\n  }, __vue_inject_styles__$2, __vue_script__$2, __vue_scope_id__$2, __vue_is_functional_template__$2, __vue_module_identifier__$2, false, undefined, undefined, undefined);\n\n  module.exports = {\n    RokkaImg: RokkaImg,\n    RokkaPicture: RokkaPicture,\n    RokkaSource: RokkaSource,\n    rokkaUrl: rokkaUrl,\n    \"default\": {\n      install: function install(Vue) {\n        Vue.component('rokka-img', RokkaImg);\n        Vue.component('rokka-picture', RokkaPicture);\n        Vue.component('rokka-source', RokkaSource);\n      }\n    }\n  };\n\n})));\n","/*! lozad.js - v1.14.0 - 2019-10-19\n* https://github.com/ApoorvSaxena/lozad.js\n* Copyright (c) 2019 Apoorv Saxena; Licensed MIT */\n\n\n/**\n * Detect IE browser\n * @const {boolean}\n * @private\n */\nconst isIE = typeof document !== 'undefined' && document.documentMode;\n\nconst defaultConfig = {\n  rootMargin: '0px',\n  threshold: 0,\n  load(element) {\n    if (element.nodeName.toLowerCase() === 'picture') {\n      const img = document.createElement('img');\n      if (isIE && element.getAttribute('data-iesrc')) {\n        img.src = element.getAttribute('data-iesrc');\n      }\n\n      if (element.getAttribute('data-alt')) {\n        img.alt = element.getAttribute('data-alt');\n      }\n\n      element.append(img);\n    }\n\n    if (element.nodeName.toLowerCase() === 'video' && !element.getAttribute('data-src')) {\n      if (element.children) {\n        const childs = element.children;\n        let childSrc;\n        for (let i = 0; i <= childs.length - 1; i++) {\n          childSrc = childs[i].getAttribute('data-src');\n          if (childSrc) {\n            childs[i].src = childSrc;\n          }\n        }\n\n        element.load();\n      }\n    }\n\n    if (element.getAttribute('data-src')) {\n      element.src = element.getAttribute('data-src');\n    }\n\n    if (element.getAttribute('data-srcset')) {\n      element.setAttribute('srcset', element.getAttribute('data-srcset'));\n    }\n\n    if (element.getAttribute('data-background-image')) {\n      element.style.backgroundImage = `url('${element.getAttribute('data-background-image').split(',').join('\\'),url(\\'')}')`;\n    } else if (element.getAttribute('data-background-image-set')) {\n      const imageSetLinks = element.getAttribute('data-background-image-set').split(',');\n      let firstUrlLink = (imageSetLinks[0].substr(0, imageSetLinks[0].indexOf(' ')) || imageSetLinks[0]); // Substring before ... 1x\n      firstUrlLink = firstUrlLink.indexOf('url(') === -1 ? `url(${firstUrlLink})` : firstUrlLink;\n      if (imageSetLinks.length === 1) {\n        element.style.backgroundImage = firstUrlLink;\n      } else {\n        element.setAttribute('style', (element.getAttribute('style') || '') + `background-image: ${firstUrlLink}; background-image: -webkit-image-set(${imageSetLinks}); background-image: image-set(${imageSetLinks})`);\n      }\n    }\n\n    if (element.getAttribute('data-toggle-class')) {\n      element.classList.toggle(element.getAttribute('data-toggle-class'));\n    }\n  },\n  loaded() {}\n};\n\nfunction markAsLoaded(element) {\n  element.setAttribute('data-loaded', true);\n}\n\nconst isLoaded = element => element.getAttribute('data-loaded') === 'true';\n\nconst onIntersection = (load, loaded) => (entries, observer) => {\n  entries.forEach(entry => {\n    if (entry.intersectionRatio > 0 || entry.isIntersecting) {\n      observer.unobserve(entry.target);\n\n      if (!isLoaded(entry.target)) {\n        load(entry.target);\n        markAsLoaded(entry.target);\n        loaded(entry.target);\n      }\n    }\n  });\n};\n\nconst getElements = (selector, root = document) => {\n  if (selector instanceof Element) {\n    return [selector]\n  }\n\n  if (selector instanceof NodeList) {\n    return selector\n  }\n\n  return root.querySelectorAll(selector)\n};\n\nfunction lozad (selector = '.lozad', options = {}) {\n  const {root, rootMargin, threshold, load, loaded} = Object.assign({}, defaultConfig, options);\n  let observer;\n\n  if (typeof window !== 'undefined' && window.IntersectionObserver) {\n    observer = new IntersectionObserver(onIntersection(load, loaded), {\n      root,\n      rootMargin,\n      threshold\n    });\n  }\n\n  return {\n    observe() {\n      const elements = getElements(selector, root);\n\n      for (let i = 0; i < elements.length; i++) {\n        if (isLoaded(elements[i])) {\n          continue\n        }\n\n        if (observer) {\n          observer.observe(elements[i]);\n          continue\n        }\n\n        load(elements[i]);\n        markAsLoaded(elements[i]);\n        loaded(elements[i]);\n      }\n    },\n    triggerLoad(element) {\n      if (isLoaded(element)) {\n        return\n      }\n\n      load(element);\n      markAsLoaded(element);\n      loaded(element);\n    },\n    observer\n  }\n}\n\nexport default lozad;\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","function normalizeComponent(template, style, script, scopeId, isFunctionalTemplate, moduleIdentifier /* server only */, shadowMode, createInjector, createInjectorSSR, createInjectorShadow) {\r\n    if (typeof shadowMode !== 'boolean') {\r\n        createInjectorSSR = createInjector;\r\n        createInjector = shadowMode;\r\n        shadowMode = false;\r\n    }\r\n    // Vue.extend constructor export interop.\r\n    const options = typeof script === 'function' ? script.options : script;\r\n    // render functions\r\n    if (template && template.render) {\r\n        options.render = template.render;\r\n        options.staticRenderFns = template.staticRenderFns;\r\n        options._compiled = true;\r\n        // functional template\r\n        if (isFunctionalTemplate) {\r\n            options.functional = true;\r\n        }\r\n    }\r\n    // scopedId\r\n    if (scopeId) {\r\n        options._scopeId = scopeId;\r\n    }\r\n    let hook;\r\n    if (moduleIdentifier) {\r\n        // server build\r\n        hook = function (context) {\r\n            // 2.3 injection\r\n            context =\r\n                context || // cached call\r\n                    (this.$vnode && this.$vnode.ssrContext) || // stateful\r\n                    (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext); // functional\r\n            // 2.2 with runInNewContext: true\r\n            if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\r\n                context = __VUE_SSR_CONTEXT__;\r\n            }\r\n            // inject component styles\r\n            if (style) {\r\n                style.call(this, createInjectorSSR(context));\r\n            }\r\n            // register component module identifier for async chunk inference\r\n            if (context && context._registeredComponents) {\r\n                context._registeredComponents.add(moduleIdentifier);\r\n            }\r\n        };\r\n        // used by ssr in case component is cached and beforeCreate\r\n        // never gets called\r\n        options._ssrRegister = hook;\r\n    }\r\n    else if (style) {\r\n        hook = shadowMode\r\n            ? function (context) {\r\n                style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot));\r\n            }\r\n            : function (context) {\r\n                style.call(this, createInjector(context));\r\n            };\r\n    }\r\n    if (hook) {\r\n        if (options.functional) {\r\n            // register for functional component in vue file\r\n            const originalRender = options.render;\r\n            options.render = function renderWithStyleInjection(h, context) {\r\n                hook.call(context);\r\n                return originalRender(h, context);\r\n            };\r\n        }\r\n        else {\r\n            // inject component registration as beforeCreate hook\r\n            const existing = options.beforeCreate;\r\n            options.beforeCreate = existing ? [].concat(existing, hook) : [hook];\r\n        }\r\n    }\r\n    return script;\r\n}\n\nconst isOldIE = typeof navigator !== 'undefined' &&\r\n    /msie [6-9]\\\\b/.test(navigator.userAgent.toLowerCase());\r\nfunction createInjector(context) {\r\n    return (id, style) => addStyle(id, style);\r\n}\r\nlet HEAD;\r\nconst styles = {};\r\nfunction addStyle(id, css) {\r\n    const group = isOldIE ? css.media || 'default' : id;\r\n    const style = styles[group] || (styles[group] = { ids: new Set(), styles: [] });\r\n    if (!style.ids.has(id)) {\r\n        style.ids.add(id);\r\n        let code = css.source;\r\n        if (css.map) {\r\n            // https://developer.chrome.com/devtools/docs/javascript-debugging\r\n            // this makes source maps inside style tags work properly in Chrome\r\n            code += '\\n/*# sourceURL=' + css.map.sources[0] + ' */';\r\n            // http://stackoverflow.com/a/26603875\r\n            code +=\r\n                '\\n/*# sourceMappingURL=data:application/json;base64,' +\r\n                    btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) +\r\n                    ' */';\r\n        }\r\n        if (!style.element) {\r\n            style.element = document.createElement('style');\r\n            style.element.type = 'text/css';\r\n            if (css.media)\r\n                style.element.setAttribute('media', css.media);\r\n            if (HEAD === undefined) {\r\n                HEAD = document.head || document.getElementsByTagName('head')[0];\r\n            }\r\n            HEAD.appendChild(style.element);\r\n        }\r\n        if ('styleSheet' in style.element) {\r\n            style.styles.push(code);\r\n            style.element.styleSheet.cssText = style.styles\r\n                .filter(Boolean)\r\n                .join('\\n');\r\n        }\r\n        else {\r\n            const index = style.ids.size - 1;\r\n            const textNode = document.createTextNode(code);\r\n            const nodes = style.element.childNodes;\r\n            if (nodes[index])\r\n                style.element.removeChild(nodes[index]);\r\n            if (nodes.length)\r\n                style.element.insertBefore(textNode, nodes[index]);\r\n            else\r\n                style.element.appendChild(textNode);\r\n        }\r\n    }\r\n}\n\nfunction createInjectorSSR(context) {\r\n    if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\r\n        context = __VUE_SSR_CONTEXT__;\r\n    }\r\n    if (!context)\r\n        return () => { };\r\n    if (!('styles' in context)) {\r\n        context._styles = context._styles || {};\r\n        Object.defineProperty(context, 'styles', {\r\n            enumerable: true,\r\n            get: () => context._renderStyles(context._styles)\r\n        });\r\n        context._renderStyles = context._renderStyles || renderStyles;\r\n    }\r\n    return (id, style) => addStyle$1(id, style, context);\r\n}\r\nfunction addStyle$1(id, css, context) {\r\n    const group = process.env.NODE_ENV === 'production' ? css.media || 'default' : id;\r\n    const style = context._styles[group] || (context._styles[group] = { ids: [], css: '' });\r\n    if (!style.ids.includes(id)) {\r\n        style.media = css.media;\r\n        style.ids.push(id);\r\n        let code = css.source;\r\n        if (process.env.NODE_ENV !== 'production' && css.map) {\r\n            // https://developer.chrome.com/devtools/docs/javascript-debugging\r\n            // this makes source maps inside style tags work properly in Chrome\r\n            code += '\\n/*# sourceURL=' + css.map.sources[0] + ' */';\r\n            // http://stackoverflow.com/a/26603875\r\n            code +=\r\n                '\\n/*# sourceMappingURL=data:application/json;base64,' +\r\n                    Buffer.from(unescape(encodeURIComponent(JSON.stringify(css.map)))).toString('base64') +\r\n                    ' */';\r\n        }\r\n        style.css += code + '\\n';\r\n    }\r\n}\r\nfunction renderStyles(styles) {\r\n    let css = '';\r\n    for (const key in styles) {\r\n        const style = styles[key];\r\n        css +=\r\n            '<style data-vue-ssr-id=\"' +\r\n                Array.from(style.ids).join(' ') +\r\n                '\"' +\r\n                (style.media ? ' media=\"' + style.media + '\"' : '') +\r\n                '>' +\r\n                style.css +\r\n                '</style>';\r\n    }\r\n    return css;\r\n}\n\nfunction createInjector$1(context, shadowRoot) {\r\n    return (id, style) => addStyle$2(style, shadowRoot);\r\n}\r\nfunction createStyleElement(shadowRoot) {\r\n    var styleElement = document.createElement('style');\r\n    styleElement.type = 'text/css';\r\n    shadowRoot.appendChild(styleElement);\r\n    return styleElement;\r\n}\r\nfunction addStyle$2(css, shadowRoot) {\r\n    const styleElement = createStyleElement(shadowRoot);\r\n    if (css.media)\r\n        styleElement.setAttribute('media', css.media);\r\n    if ('styleSheet' in styleElement) {\r\n        styleElement.styleSheet.cssText = css.source;\r\n    }\r\n    else {\r\n        while (styleElement.firstChild) {\r\n            styleElement.removeChild(styleElement.firstChild);\r\n        }\r\n        styleElement.appendChild(document.createTextNode(css.source));\r\n    }\r\n}\n\nexport { normalizeComponent, createInjector, createInjectorSSR, createInjector$1 as createInjectorShadow };\n//# sourceMappingURL=index.mjs.map\n","<template>\n  <rokka-img\n    :org=\"org\"\n    :hash=\"hash\"\n    :filename=\"filename\"\n    :stack=\"stack\"\n    :format=\"format\"\n    :alt=\"alt\"\n    srcset-attribute=\"data-srcset\"\n    src-attribute=\"data-src\"\n    src-additional-attribute=\"src\"\n    :src-additional=\"srcAdditionalComputed\"\n    :postfix=\"postfix\"\n    :options=\"options\"\n  />\n</template>\n\n<script>\nimport { RokkaImg, rokkaUrl as buildRokkaUrl } from 'vue-rokka-image'\nimport lozad from 'lozad'\n\nclass ImageCache {\n  constructor({ max }) {\n    this.options = {\n      max: max || 100,\n    }\n    this._caches = []\n  }\n\n  has(key) {\n    return this._caches.indexOf(key) > -1\n  }\n\n  add(key) {\n    if (this.has(key)) return\n    this._caches.push(key)\n    if (this._caches.length > this.options.max) {\n      this.free()\n    }\n  }\n\n  free() {\n    this._caches.shift()\n  }\n}\n\nexport default {\n  name: 'RokkaImgLazy',\n  components: {\n    RokkaImg,\n  },\n  props: {\n    ...RokkaImg.props,\n    srcAttribute: {\n      type: String,\n      default: 'data-src',\n    },\n    srcsetAttribute: {\n      type: String,\n      default: 'data-srcset',\n    },\n    postfix: {\n      type: [Object, Array],\n      default: () => ['1x', '2x'],\n    },\n    options: {\n      type: [Object, Array],\n      default: () => [{}, { dpr: '2' }],\n    },\n    operations: {\n      type: [Object, Array],\n      default: () => [],\n    },\n    loading: {\n      type: String,\n      default: null,\n    },\n  },\n  computed: {\n    srcAdditionalComputed() {\n      if (!this.loading || this.isCached) {\n        return 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs='\n      }\n      window._imageCache.add(this.rokkaRenderUrl)\n      return this.loading\n    },\n\n    isCached() {\n      return window._imageCache.has(this.rokkaRenderUrl)\n    },\n\n    rokkaRenderUrl() {\n      return buildRokkaUrl({\n        org: this.org,\n        hash: this.hash,\n        stack: this.stack,\n        format: this.format,\n        filename: this.filename,\n        options: Array.isArray(this.options) ? this.options[0] : this.options,\n        variables: Array.isArray(this.variables)\n          ? this.variables[0]\n          : this.variables,\n      })\n    },\n  },\n  created() {\n    if (!window._imageCache) {\n      window._imageCache = new ImageCache({ max: 200 })\n    }\n  },\n  updated() {\n    window._lozadObserver.observe()\n  },\n  mounted() {\n    // We initialize Lozad.js on the root\n    // element of our component.\n    if (!window._lozadObserver) {\n      window._lozadObserver = lozad('.rokka--attr-data-src', {\n        rootMargin: '200px',\n      })\n    }\n    window._lozadObserver.observe()\n  },\n}\n</script>\n\n<style scoped></style>\n","import RokkaImgLazy from './Img.vue'\n\nmodule.exports = {\n  RokkaImgLazy,\n  default: {\n    install(Vue) {\n      Vue.component('rokka-img-lazy', RokkaImgLazy)\n    },\n  },\n}\n"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_defineProperty","key","value","Object","defineProperty","enumerable","configurable","writable","generalProps","alt","type","String","default","title","org","stack","hash","format","filename","srcAttribute","srcAdditionalAttribute","srcsetAttribute","operations","Array","options","variables","flattenObject","toReturn","keys","forEach","val","flatObject","x","hasOwnProperty","call","isArray","push","concat","rokkaUrl","props","fileName","newFileName","variablesStr","v","join","optionsStr","url","replace","isObject","item","mergeDeep","target","_len","arguments","length","sources","_key","source","shift","assign","apply","mergeArraysDeep","arr1","arr2","unique","reduce","accumulator","name","map","srcset","currentPostfix","postfix","currentOperations","currentOptions","currentVariables","parrentPostfix","$parent","$props","parrentOperations","parrentOptions","parrentVariables","maxItems","Math","max","$options","_componentTag","i","pOperations","pOptions","pVariables","propsData","encodeURI","script","srcAdditional","computed","srcAdditionalComputed","this","rokkaSrc","rokkaSrcset","currentProps","normalizeComponent","template","style","scopeId","isFunctionalTemplate","moduleIdentifier","shadowMode","createInjector","createInjectorSSR","createInjectorShadow","hook","render","staticRenderFns","_compiled","functional","_scopeId","context","$vnode","ssrContext","parent","__VUE_SSR_CONTEXT__","_registeredComponents","add","_ssrRegister","$root","shadowRoot","originalRender","h","existing","beforeCreate","navigator","test","userAgent","toLowerCase","__vue_inject_styles__","undefined","__vue_scope_id__","__vue_module_identifier__","RokkaImg","_vm","_h","$createElement","_c","_self","_b","class","attrs","_d","script$1","__vue_inject_styles__$1","__vue_scope_id__$1","__vue_module_identifier__$1","RokkaPicture","staticClass","_t","script$2","media","__vue_inject_styles__$2","__vue_scope_id__$2","__vue_module_identifier__$2","RokkaSource","module","install","Vue","component","factory","isIE","document","documentMode","defaultConfig","rootMargin","threshold","[object Object]","element","nodeName","img","createElement","getAttribute","src","append","children","childs","childSrc","load","setAttribute","backgroundImage","split","imageSetLinks","firstUrlLink","substr","indexOf","classList","toggle","markAsLoaded","isLoaded","onIntersection","loaded","entries","observer","entry","intersectionRatio","isIntersecting","unobserve","getElements","selector","root","Element","NodeList","querySelectorAll","window","IntersectionObserver","elements","observe","css","ref","insertAt","head","getElementsByTagName","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","exports","RokkaImgLazy"],"mappings":";;;;;yRAUE,SAASA,EAAQC,GAWf,OATED,EADoB,mBAAXE,QAAoD,iBAApBA,OAAOC,SACtC,SAAUF,GAClB,cAAcA,GAGN,SAAUA,GAClB,OAAOA,GAAyB,mBAAXC,QAAyBD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,IAI9GA,GAGjB,SAASK,EAAgBL,EAAKM,EAAKC,GAYjC,OAXID,KAAON,EACTQ,OAAOC,eAAeT,EAAKM,EAAK,CAC9BC,MAAOA,EACPG,YAAY,EACZC,cAAc,EACdC,UAAU,IAGZZ,EAAIM,GAAOC,EAGNP,EAGT,IAQIa,EAAe,CACjBC,IAAK,CACHC,KAAMC,OACNC,QAAW,MAEbC,MAAO,CACLH,KAAMC,OACNC,QAAW,MAEbE,IAAK,CACHJ,KAAMC,OACNC,QAAW,IAEbG,MAAO,CACLL,KAAMC,OACNC,QAAW,WAEbI,KAAM,CACJN,KAAMC,OACNC,QAAW,IAEbK,OAAQ,CACNP,KAAMC,OACNC,QAAW,OAEbM,SAAU,CACRR,KAAMC,OACNC,QAAW,SAEbO,aAAc,CACZT,KAAMC,OACNC,QAAW,OAEbQ,uBAAwB,CACtBV,KAAMC,OACNC,QAAW,MAEbS,gBAAiB,CACfX,KAAMC,OACNC,QAAW,UAEbU,WAAY,CACVZ,KAAMa,MACNX,QAAW,WACT,MAAO,KAGXY,QAAS,CACPd,KAAMP,OACNS,QAAW,WACT,MAAO,KAGXa,UAAW,CACTf,KAAMP,OACNS,QAAW,WACT,MAAO,MAcTc,EAAgB,SAASA,EAAc/B,GACzC,IAAIgC,EAAW,GAoBf,OAnBAxB,OAAOyB,KAAKjC,GAAKkC,QAAQ,SAAU5B,GACjC,IAAI6B,EAAMnC,EAAIM,GAEd,GAAqB,WAAjBP,EAAQoC,GAAmB,CAC7B,IAAIC,EAAaL,EAAcI,GAE/B,IAAK,IAAIE,KAAKD,EACP5B,OAAOJ,UAAUkC,eAAeC,KAAKH,EAAYC,KAElDT,MAAMY,QAAQJ,GAChBJ,EAASS,KAAK,GAAGC,OAAOpC,EAAK,KAAKoC,OAAON,EAAWC,KAEpDL,EAASS,KAAK,GAAGC,OAAOpC,EAAK,KAAKoC,OAAOL,EAAG,KAAKK,OAAON,EAAWC,WAIvEL,EAASS,KAAK,GAAGC,OAAOpC,EAAK,KAAKoC,OAAOP,MAGtCH,GAELW,EAAW,SAAkBC,GAC/B,IAtGiDC,EAC7CC,EAqGA3B,EAAMyB,EAAMzB,IACZC,EAAQwB,EAAMxB,MACdU,EAAYc,EAAMd,UAClBD,EAAUe,EAAMf,QAChBN,EAAWqB,EAAMrB,SACjBD,EAASsB,EAAMtB,OACfD,EAAOuB,EAAMvB,KAOb0B,EAAehB,EAAc,CAC/BiB,EAAGlB,IACFmB,KAAK,MACJC,EAAanB,EAAc,CAC7BF,QAASA,IACRoB,KAAK,MACJE,EAAM,CAAC,GAAGT,OAAOvB,EAAK,cAAcuB,OAAOtB,GAC/C2B,EAAcG,EAAY7B,EAAM,GAAGqB,QA1HcG,EA0HWtB,EAzHxDuB,EAAcD,EAIlBC,GAFAA,EAAcA,EAAYM,QAAQ,iBAAiB,KAEzBA,QAAQ,WAAW,MAqH0B,KAAKV,OAAOpB,IAAS2B,KAAK,KAAKG,QAAQ,UAAW,KACzH,MAAO,WAAaD,GASlBE,EAAW,SAAkBC,GAC/B,OAAOA,GAA0B,WAAlBvD,EAAQuD,KAAuB1B,MAAMY,QAAQc,IAQ1DC,EAAY,SAASA,EAAUC,GACjC,IAAK,IAAIC,EAAOC,UAAUC,OAAQC,EAAU,IAAIhC,MAAM6B,EAAO,EAAIA,EAAO,EAAI,GAAII,EAAO,EAAGA,EAAOJ,EAAMI,IACrGD,EAAQC,EAAO,GAAKH,UAAUG,GAGhC,IAAKD,EAAQD,OAAQ,OAAOH,EAC5B,IAAIM,EAASF,EAAQG,QAErB,GAAIV,EAASG,IAAWH,EAASS,GAC/B,IAAK,IAAIxD,KAAOwD,EACVT,EAASS,EAAOxD,KACbkD,EAAOlD,IAAME,OAAOwD,OAAOR,EAAQnD,EAAgB,GAAIC,EAAK,KACjEiD,EAAUC,EAAOlD,GAAMwD,EAAOxD,KAE9BE,OAAOwD,OAAOR,EAAQnD,EAAgB,GAAIC,EAAKwD,EAAOxD,KAK5D,OAAOiD,EAAUU,WAAM,EAAQ,CAACT,GAAQd,OAAOkB,KAG7CM,EAAkB,SAAyBC,EAAMC,GACnD,IAAIC,EAASF,EAAKzB,OAAO0B,GAAME,OAAO,SAAUC,EAAajB,GAO3D,OANIiB,EAAYjB,EAAKkB,MACnBD,EAAYjB,EAAKkB,MAAQjB,EAAUgB,EAAYjB,EAAKkB,MAAOlB,GAE3DiB,EAAYjB,EAAKkB,MAAQlB,EAGpBiB,GACN,IACH,OAAO/D,OAAOyB,KAAKoC,GAAQI,IAAI,SAAUnE,GACvC,OAAO+D,EAAO/D,MAGdoE,EAAS,SAAgBpB,GAC3B,IAAIqB,EAAiBrB,EAAKsB,QACtBC,EAAoBvB,EAAK3B,WACzBmD,EAAiBxB,EAAKzB,QACtBkD,EAAmBzB,EAAKxB,UACxBkD,EAAiB1B,EAAK2B,SAAW3B,EAAK2B,QAAQC,QAAU5B,EAAK2B,QAAQC,OAAON,QAC5EO,EAAoB7B,EAAK2B,SAAW3B,EAAK2B,QAAQC,QAAU5B,EAAK2B,QAAQC,OAAOvD,WAC/EyD,EAAiB9B,EAAK2B,SAAW3B,EAAK2B,QAAQC,QAAU5B,EAAK2B,QAAQC,OAAOrD,QAC5EwD,EAAmB/B,EAAK2B,SAAW3B,EAAK2B,QAAQC,QAAU5B,EAAK2B,QAAQC,OAAOpD,UAC9EwD,EAAWC,KAAKC,IAAI5D,MAAMY,QAAQmC,GAAkBA,EAAehB,OAAS,EAAG/B,MAAMY,QAAQqC,GAAqBA,EAAkBlB,OAAS,EAAG/B,MAAMY,QAAQsC,GAAkBA,EAAenB,OAAS,EAAG/B,MAAMY,QAAQuC,GAAoBA,EAAiBpB,OAAS,GAE/N,kBAAxCL,EAAK2B,QAAQQ,SAASC,gBACxBJ,EAAWC,KAAKC,IAAIF,EAAU1D,MAAMY,QAAQwC,GAAkBA,EAAerB,OAAS,EAAG/B,MAAMY,QAAQ2C,GAAqBA,EAAkBxB,OAAS,EAAG/B,MAAMY,QAAQ4C,GAAkBA,EAAezB,OAAS,EAAG/B,MAAMY,QAAQ6C,GAAoBA,EAAiB1B,OAAS,IAKnR,IAFA,IAAIe,EAAS,GAEJiB,EAAI,EAAGA,EAAIL,EAAUK,IAAK,CAGjC,IAAIf,EAAUhD,MAAMY,QAAQmC,GAAkBA,EAAegB,GAAKhB,EAC9DhD,EAAaC,MAAMY,QAAQqC,IAAsBjD,MAAMY,QAAQqC,EAAkB,IAAMA,EAAkBc,GAAKd,EAC9GhD,EAAUD,MAAMY,QAAQsC,GAAkBA,EAAea,GAAKb,EAC9DhD,EAAYF,MAAMY,QAAQuC,GAAoBA,EAAiBY,GAAKZ,EAExE,GAA4C,kBAAxCzB,EAAK2B,QAAQQ,SAASC,cAAmC,CAG3D,IAAIE,EAAchE,MAAMY,QAAQ2C,IAAsBvD,MAAMY,QAAQ2C,EAAkB,IAAMA,EAAkBQ,GAAKR,EAC/GU,EAAWjE,MAAMY,QAAQ4C,GAAkBA,EAAeO,GAAKP,EAC/DU,EAAalE,MAAMY,QAAQ6C,GAAoBA,EAAiBM,GAAKN,EACzE1D,EAAauC,EAAgB0B,EAAajE,GAC1CG,EAAYyB,EAAUuC,EAAYhE,GAClCD,EAAU0B,EAAUsC,EAAUhE,GAG5BA,aAAmBD,OAA4B,IAAnBC,EAAQ8B,SACtC9B,EAAU,IAGZ,IAAIsB,EAAMR,EAASnC,OAAOwD,OAAO,GAAIV,EAAK2B,QAAQC,OAAQ,GAAI5B,EAAKmC,SAASM,UAAW,CACrFpE,WAAYA,EACZG,UAAWA,EACXD,QAASA,KAEXsB,EAAM6C,UAAU7C,IAAQyB,EAAU,IAAMA,EAAU,IAClDF,EAAOjC,KAAKU,GAGd,OAAOuB,EAAOzB,KAAK,OAIjBgD,EAAS,CACXrD,MAAOpC,OAAOwD,OAAO,GAAInD,EAAc,CACrC+D,QAAS,CACP7D,KAAM,CAACP,OAAQoB,OACfX,QAAW,WACT,MAAO,KAGXY,QAAS,CACPd,KAAM,CAACP,OAAQoB,OACfX,QAAW,WACT,MAAO,KAGXiF,cAAe,CACbnF,KAAMC,OACNC,QAAW,QAGfkF,SAAU,CAIRC,sBAAuB,WACrB,OAAOC,KAAK5E,uBAAyB4E,KAAKH,cAAgBG,KAAKH,cAAgBG,KAAKC,SAAW,MAEjGC,YAAa,WACX,OAAO7B,EAAO2B,OAEhBC,SAAU,WACR,IAAIzB,EAAoBwB,KAAK1E,WACzBmD,EAAiBuB,KAAKxE,QACtBkD,EAAmBsB,KAAKvE,UACxBqD,EAAoBkB,KAAKpB,SAAWoB,KAAKpB,QAAQC,QAAUmB,KAAKpB,QAAQC,OAAOvD,WAC/EyD,EAAiBiB,KAAKpB,SAAWoB,KAAKpB,QAAQC,QAAUmB,KAAKpB,QAAQC,OAAOrD,QAC5EwD,EAAmBgB,KAAKpB,SAAWoB,KAAKpB,QAAQC,QAAUmB,KAAKpB,QAAQC,OAAOpD,UAG9EH,EAAaC,MAAMY,QAAQqC,IAAsBjD,MAAMY,QAAQqC,EAAkB,IAAMA,EAAkB,IAAM,GAAKA,EACpHhD,EAAUD,MAAMY,QAAQsC,GAAkBA,EAAe,IAAM,GAAKA,EACpEhD,EAAYF,MAAMY,QAAQuC,GAAoBA,EAAiB,IAAM,GAAKA,EAC1EyB,EAAeH,KAAKnB,OAExB,GAA4C,kBAAxCmB,KAAKpB,QAAQQ,SAASC,cAAmC,CAG3D,IAAIE,EAAchE,MAAMY,QAAQ2C,IAAsBvD,MAAMY,QAAQ2C,EAAkB,IAAMA,EAAkB,GAAKA,EAC/GU,EAAWjE,MAAMY,QAAQ4C,GAAkBA,EAAe,GAAKA,EAC/DU,EAAalE,MAAMY,QAAQ6C,GAAoBA,EAAiB,GAAKA,EACzE1D,EAAauC,EAAgB0B,EAAajE,GAC1CG,EAAYyB,EAAUuC,EAAYhE,GAClCD,EAAU0B,EAAUsC,EAAUhE,GAE9B2E,EAAeH,KAAKZ,SAASM,UAG/B,IAAI5C,EAAMR,EAASnC,OAAOwD,OAAO,GAAIqC,KAAKpB,QAAQC,OAAQ,GAAIsB,EAAc,CAC1E7E,WAAYA,EACZG,UAAWA,EACXD,QAASA,KAEX,OAAOsB,KAKb,SAASsD,EAAmBC,EAAUC,EAAOV,EAAQW,EAASC,EAAsBC,EAAoCC,EAAYC,EAAgBC,EAAmBC,GACzI,kBAAfH,IACPE,EAAoBD,EACpBA,EAAiBD,EACjBA,GAAa,GAGjB,MAAMlF,EAA4B,mBAAXoE,EAAwBA,EAAOpE,QAAUoE,EAehE,IAAIkB,EAmCJ,GAhDIT,GAAYA,EAASU,SACrBvF,EAAQuF,OAASV,EAASU,OAC1BvF,EAAQwF,gBAAkBX,EAASW,gBACnCxF,EAAQyF,WAAY,EAEhBT,IACAhF,EAAQ0F,YAAa,IAIzBX,IACA/E,EAAQ2F,SAAWZ,GAGnBE,GAEAK,EAAO,SAAUM,IAEbA,EACIA,GACKpB,KAAKqB,QAAUrB,KAAKqB,OAAOC,YAC3BtB,KAAKuB,QAAUvB,KAAKuB,OAAOF,QAAUrB,KAAKuB,OAAOF,OAAOC,aAElB,oBAAxBE,sBACnBJ,EAAUI,qBAGVlB,GACAA,EAAMpE,KAAK8D,KAAMY,EAAkBQ,IAGnCA,GAAWA,EAAQK,uBACnBL,EAAQK,sBAAsBC,IAAIjB,IAK1CjF,EAAQmG,aAAeb,GAElBR,IACLQ,EAAOJ,EACD,SAAUU,GACRd,EAAMpE,KAAK8D,KAAMa,EAAqBO,EAASpB,KAAK4B,MAAMxC,SAASyC,cAErE,SAAUT,GACRd,EAAMpE,KAAK8D,KAAMW,EAAeS,MAGxCN,EACA,GAAItF,EAAQ0F,WAAY,CAEpB,MAAMY,EAAiBtG,EAAQuF,OAC/BvF,EAAQuF,OAAS,SAAkCgB,EAAGX,GAElD,OADAN,EAAK5E,KAAKkF,GACHU,EAAeC,EAAGX,QAG5B,CAED,MAAMY,EAAWxG,EAAQyG,aACzBzG,EAAQyG,aAAeD,EAAW,GAAG3F,OAAO2F,EAAUlB,GAAQ,CAACA,GAGvE,OAAOlB,EAG0B,oBAAdsC,WACnB,gBAAgBC,KAAKD,UAAUE,UAAUC,eAG7C,IAsBIC,OAAwBC,EAGxBC,OAAmBD,EAGnBE,OAA4BF,EAU5BG,EAAWtC,EAAmB,CAChCW,OApCmB,WACnB,IAAI4B,EAAM3C,KAEN4C,EAAKD,EAAIE,eAETC,EAAKH,EAAII,MAAMD,IAAMF,EAEzB,OAAOE,EAAG,MAAOH,EAAIK,GAAG,CACtBC,MAAS,eAAiBN,EAAIxH,aAC9B+H,MAAO,CACLzI,IAAOkI,EAAIlI,IACXI,MAAS8H,EAAI9H,QAEd,MAAO8H,EAAIQ,GAAG,GAAI,CAACR,EAAIxH,aAAcwH,EAAI1C,SAAU0C,EAAItH,gBAAiBsH,EAAIzC,YAAayC,EAAIvH,uBAAwBuH,EAAI5C,2BAwB5HiB,gBArB4B,IAsB3BsB,EAzCkB1C,EAyCqB4C,GAVL,EAUuDC,GAA2B,OAAOF,OAAWA,OAAWA,GAGhJa,EAAW,CACb7G,MAAOpC,OAAOwD,OAAO,GAAInD,IAsBvB6I,OAA0Bd,EAG1Be,OAAqBf,EAGrBgB,OAA8BhB,EAU9BiB,EAAepD,EAAmB,CACpCW,OAhCqB,WACrB,IAEI6B,EAFM5C,KAEG6C,eAETC,EAJM9C,KAIG+C,MAAMD,IAAMF,EAEzB,OAAOE,EAAG,MAAO,CACfW,YAAa,iBACZ,CAACX,EAAG,UAAW,CARR9C,KAQa0D,GAAG,YAAa,MAwBvC1C,gBArB8B,IAsB7BqC,EArCoBD,EAqCuBE,GAVP,EAU6DC,GAA6B,OAAOhB,OAAWA,OAAWA,GAG1JoB,EAAW,CACbpH,MAAOpC,OAAOwD,OAAO,GAAInD,EAAc,CACrCoJ,MAAO,CACLlJ,KAAMC,OACNC,QAAW,IAEb2D,QAAS,CACP7D,KAAM,CAACP,OAAQoB,OACfX,QAAW,WACT,MAAO,KAGXY,QAAS,CACPd,KAAM,CAACP,OAAQoB,OACfX,QAAW,WACT,MAAO,KAGXa,UAAW,CACTf,KAAM,CAACP,OAAQoB,OACfX,QAAW,WACT,MAAO,OAIbkF,SAAU,CACRzB,OAAQ,WACN,OAAOA,EAAO2B,SA2BhB6D,OAA0BtB,EAG1BuB,OAAqBvB,EAGrBwB,OAA8BxB,EAU9ByB,EAAc5D,EAAmB,CACnCW,OAnCqB,WACrB,IAEI6B,EAFM5C,KAEG6C,eAETC,EAJM9C,KAIG+C,MAAMD,IAAMF,EAEzB,OAAOE,EAAG,SAAU,CAClBI,MAAO,CACLU,MARM5D,KAQO4D,MACbvF,OATM2B,KASQ3B,WA0BlB2C,gBArB8B,IAsB7B6C,EAxCoBF,EAwCuBG,GAVP,EAU6DC,GAA6B,OAAOxB,OAAWA,OAAWA,GAE9J0B,UAAiB,CACfvB,SAAUA,EACVc,aAAcA,EACdQ,YAAaA,EACb1H,SAAUA,EACV1B,QAAW,CACTsJ,QAAS,SAAiBC,GACxBA,EAAIC,UAAU,YAAa1B,GAC3ByB,EAAIC,UAAU,gBAAiBZ,GAC/BW,EAAIC,UAAU,eAAgBJ,MApkBpCK,8DCGF,MAAMC,EAA2B,oBAAbC,UAA4BA,SAASC,aAEnDC,EAAgB,CACpBC,WAAY,MACZC,UAAW,EACXC,KAAKC,GACH,GAAuC,YAAnCA,EAAQC,SAASzC,cAA6B,CAChD,MAAM0C,EAAMR,SAASS,cAAc,OAC/BV,GAAQO,EAAQI,aAAa,gBAC/BF,EAAIG,IAAML,EAAQI,aAAa,eAG7BJ,EAAQI,aAAa,cACvBF,EAAItK,IAAMoK,EAAQI,aAAa,aAGjCJ,EAAQM,OAAOJ,GAGjB,GAAuC,UAAnCF,EAAQC,SAASzC,gBAA8BwC,EAAQI,aAAa,aAClEJ,EAAQO,SAAU,CACpB,MAAMC,EAASR,EAAQO,SACvB,IAAIE,EACJ,IAAK,IAAIhG,EAAI,EAAGA,GAAK+F,EAAO/H,OAAS,EAAGgC,KACtCgG,EAAWD,EAAO/F,GAAG2F,aAAa,eAEhCI,EAAO/F,GAAG4F,IAAMI,GAIpBT,EAAQU,OAYZ,GARIV,EAAQI,aAAa,cACvBJ,EAAQK,IAAML,EAAQI,aAAa,aAGjCJ,EAAQI,aAAa,gBACvBJ,EAAQW,aAAa,SAAUX,EAAQI,aAAa,gBAGlDJ,EAAQI,aAAa,yBACvBJ,EAAQvE,MAAMmF,wBAA0BZ,EAAQI,aAAa,yBAAyBS,MAAM,KAAK9I,KAAK,qBACjG,GAAIiI,EAAQI,aAAa,6BAA8B,CAC5D,MAAMU,EAAgBd,EAAQI,aAAa,6BAA6BS,MAAM,KAC9E,IAAIE,EAAgBD,EAAc,GAAGE,OAAO,EAAGF,EAAc,GAAGG,QAAQ,OAASH,EAAc,GAC/FC,GAAiD,IAAlCA,EAAaE,QAAQ,eAAwBF,KAAkBA,EACjD,IAAzBD,EAAcrI,OAChBuH,EAAQvE,MAAMmF,gBAAkBG,EAEhCf,EAAQW,aAAa,SAAUX,EAAQI,aAAa,UAAY,yBAA2BW,0CAAqDD,mCAA+CA,MAI/Ld,EAAQI,aAAa,sBACvBJ,EAAQkB,UAAUC,OAAOnB,EAAQI,aAAa,uBAGlDL,YAGF,SAASqB,EAAapB,GACpBA,EAAQW,aAAa,eAAe,GAGtC,MAAMU,EAAWrB,GAAmD,SAAxCA,EAAQI,aAAa,eAE3CkB,EAAiB,CAACZ,EAAMa,IAAW,CAACC,EAASC,KACjDD,EAAQxK,QAAQ0K,KACVA,EAAMC,kBAAoB,GAAKD,EAAME,kBACvCH,EAASI,UAAUH,EAAMpJ,QAEpB+I,EAASK,EAAMpJ,UAClBoI,EAAKgB,EAAMpJ,QACX8I,EAAaM,EAAMpJ,QACnBiJ,EAAOG,EAAMpJ,aAMfwJ,EAAc,CAACC,EAAUC,EAAOtC,WAChCqC,aAAoBE,QACf,CAACF,GAGNA,aAAoBG,SACfH,EAGFC,EAAKG,iBAAiBJ,8lDAG/B,SAAgBA,EAAW,SAAUpL,EAAU,IAC7C,MAAMqL,KAACA,EAAInC,WAAEA,EAAUC,UAAEA,EAASY,KAAEA,EAAIa,OAAEA,GAAUjM,OAAOwD,OAAO,GAAI8G,EAAejJ,GACrF,IAAI8K,EAUJ,MARsB,oBAAXW,QAA0BA,OAAOC,uBAC1CZ,EAAW,IAAIY,qBAAqBf,EAAeZ,EAAMa,GAAS,CAChES,KAAAA,EACAnC,WAAAA,EACAC,UAAAA,KAIG,CACLC,UACE,MAAMuC,EAAWR,EAAYC,EAAUC,GAEvC,IAAK,IAAIvH,EAAI,EAAGA,EAAI6H,EAAS7J,OAAQgC,IAC/B4G,EAASiB,EAAS7H,MAIlBgH,EACFA,EAASc,QAAQD,EAAS7H,KAI5BiG,EAAK4B,EAAS7H,IACd2G,EAAakB,EAAS7H,IACtB8G,EAAOe,EAAS7H,OAGpBsF,YAAYC,GACNqB,EAASrB,KAIbU,EAAKV,GACLoB,EAAapB,GACbuB,EAAOvB,KAETyB,SAAAA,sFChJJ,SAAqBe,EAAKC,QACX,IAARA,IAAiBA,EAAM,IAC5B,IAAIC,EAAWD,EAAIC,SAEnB,GAAKF,GAA2B,oBAAb9C,SAAnB,CAEA,IAAIiD,EAAOjD,SAASiD,MAAQjD,SAASkD,qBAAqB,QAAQ,GAC9DnH,EAAQiE,SAASS,cAAc,SACnC1E,EAAM5F,KAAO,WAEI,QAAb6M,GACEC,EAAKE,WACPF,EAAKG,aAAarH,EAAOkH,EAAKE,YAKhCF,EAAKI,YAAYtH,GAGfA,EAAMuH,WACRvH,EAAMuH,WAAWC,QAAUT,EAE3B/G,EAAMsH,YAAYrD,SAASwD,eAAeV,UCoDT,oBAAdnF,WACnB,gBAAgBC,KAAKD,UAAUE,UAAUC,eC1E7C,MDFA,SAA4BhC,EAAUC,EAAOV,EAAQW,EAASC,EAAsBC,EAAoCC,EAAYC,EAAgBC,EAAmBC,GACzI,kBAAfH,IACPE,EAAoBD,EACpBA,EAAiBD,EACjBA,GAAa,GAGjB,MAAMlF,EAA4B,mBAAXoE,EAAwBA,EAAOpE,QAAUoE,EAehE,IAAIkB,EAmCJ,GAhDIT,GAAYA,EAASU,SACrBvF,EAAQuF,OAASV,EAASU,OAC1BvF,EAAQwF,gBAAkBX,EAASW,gBACnCxF,EAAQyF,WAAY,EAEhBT,IACAhF,EAAQ0F,YAAa,IAIzBX,IACA/E,EAAQ2F,SAAWZ,GAGnBE,GAEAK,EAAO,SAAUM,IAEbA,EACIA,GACKpB,KAAKqB,QAAUrB,KAAKqB,OAAOC,YAC3BtB,KAAKuB,QAAUvB,KAAKuB,OAAOF,QAAUrB,KAAKuB,OAAOF,OAAOC,aAElB,oBAAxBE,sBACnBJ,EAAUI,qBAGVlB,GACAA,EAAMpE,KAAK8D,KAAMY,EAAkBQ,IAGnCA,GAAWA,EAAQK,uBACnBL,EAAQK,sBAAsBC,IAAIjB,IAK1CjF,EAAQmG,aAAeb,GAElBR,IACLQ,EAAOJ,EACD,SAAUU,GACRd,EAAMpE,KAAK8D,KAAMa,EAAqBO,EAASpB,KAAK4B,MAAMxC,SAASyC,cAErE,SAAUT,GACRd,EAAMpE,KAAK8D,KAAMW,EAAeS,MAGxCN,EACA,GAAItF,EAAQ0F,WAAY,CAEpB,MAAMY,EAAiBtG,EAAQuF,OAC/BvF,EAAQuF,OAAS,SAAkCgB,EAAGX,GAElD,OADAN,EAAK5E,KAAKkF,GACHU,EAAeC,EAAGX,QAG5B,CAED,MAAMY,EAAWxG,EAAQyG,aACzBzG,EAAQyG,aAAeD,EAAW,GAAG3F,OAAO2F,EAAUlB,GAAQ,CAACA,GAGvE,OAAOlB,ubEtEJoI,QAAU,CACfC,aAAAA,UACS,CACP/D,iBAAQC,GACNA,EAAIC,UAAU,iBAAkB6D"}